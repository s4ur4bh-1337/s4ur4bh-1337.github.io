(function fetchInfo(callback) {
    var currentEmail = "";
    var userCsrfToken = "";
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "/users/" + __PLUGIN_STATE__.context.context.user.tuid + "/profile", false);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            alert(data);
            userCsrfToken = data.csrfToken;
            currentEmail = data.email;
            alert("CSRFToken: " + userCsrfToken + ", Email Address: " + currentEmail);
        }
    };
    xhr.send();
})();
